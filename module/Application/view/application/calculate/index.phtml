<input type="text" id="visualizza"><br><br>
<input type="button" class="btn" value="1" id="1">
<input type="button" class="btn" value="2" id="2">
<input type="button" class="btn" value="3" id="3">
<input type="button" class="btn" value="+" id="addizione"><br><br>
<input type="button" class="btn" value="4" id="4">
<input type="button" class="btn" value="5" id="5">
<input type="button" class="btn" value="6" id="6">
<input type="button" class="btn" value="-" id="sottrazione"><br><br>
<input type="button" class="btn" value="7" id="7">
<input type="button" class="btn" value="8" id="8">
<input type="button" class="btn" value="9" id="9">
<input type="button" class="btn" value="x" id="moltiplicazione"><br><br>
<input type="button" class="btn" value="0" id="0">
<input type="button" class="btn" value="00" id="00">
<button class="btn" id="risultato">=</button>
<input type="button" class="btn" value=":" id="divisione"><br><br>


<script>

    (function () {
        $num1 = 0;
        $num1Vis = "";
        $num2Vis = "";
        $num2 = 0;
        $operazione = "";
        $ris = 0;

        $("#1").click(function () {
            if ($num1 == 0) {
                $num1Vis = $num1Vis + "1";
                $("#visualizza").val($num1Vis);
            } else if ($num1 != 0) {
                $num2Vis = $num2Vis + "1";
                $("#visualizza").val($num2Vis);
            }
        });
        $("#2").click(function () {
            if ($num1 == 0) {
                $num1Vis = $num1Vis + "2";
                $("#visualizza").val($num1Vis);
            } else if ($num1 != 0) {
                $num2Vis = $num2Vis + "2";
                $("#visualizza").val($num2Vis);
            }
        });
        $("#3").click(function () {
            if ($num1 == 0) {
                $num1Vis = $num1Vis + "3";
                $("#visualizza").val($num1Vis);
            } else if ($num1 != 0) {
                $num2Vis = $num2Vis + "3";
                $("#visualizza").val($num2Vis);
            }
        });
        $("#4").click(function () {
            if ($num1 == 0) {
                $num1Vis = $num1Vis + "4";
                $("#visualizza").val($num1Vis);
            } else if ($num1 != 0) {
                $num2Vis = $num2Vis + "4";
                $("#visualizza").val($num2Vis);
            }
        });
        $("#5").click(function () {
            if ($num1 == 0) {
                $num1Vis = $num1Vis + "5";
                $("#visualizza").val($num1Vis);
            } else if ($num1 != 0) {
                $num2Vis = $num2Vis + "5";
                $("#visualizza").val($num2Vis);
            }
        });
        $("#6").click(function () {
            if ($num1 == 0) {
                $num1Vis = $num1Vis + "6";
                $("#visualizza").val($num1Vis);
            } else if ($num1 != 0) {
                $num2Vis = $num2Vis + "6";
                $("#visualizza").val($num2Vis);
            }
        });
        $("#7").click(function () {
            if ($num1 == 0) {
                $num1Vis = $num1Vis + "7";
                $("#visualizza").val($num1Vis);
            } else if ($num1 != 0) {
                $num2Vis = $num2Vis + "7";
                $("#visualizza").val($num2Vis);
            }
        });
        $("#8").click(function () {
            if ($num1 == 0) {
                $num1Vis = $num1Vis + "8";
                $("#visualizza").val($num1Vis);
            } else if ($num1 != 0) {
                $num2Vis = $num2Vis + "8";
                $("#visualizza").val($num2Vis);
            }
        });
        $("#9").click(function () {
            if ($num1 == 0) {
                $num1Vis = $num1Vis + "9";
                $("#visualizza").val($num1Vis);
            } else if ($num1 != 0) {
                $num2Vis = $num2Vis + "9";
                $("#visualizza").val($num2Vis);
            }
        });
        $("#0").click(function () {
            if ($num1 == 0) {
                $num1Vis = $num1Vis + "0";
                $("#visualizza").val($num1Vis);
            } else if ($num1 != 0) {
                $num2Vis = $num2Vis + "0";
                $("#visualizza").val($num2Vis);
            }
        });
        $("#00").click(function () {
            if ($num1 == 0) {
                $num1Vis = $num1Vis + "00";
                $("#visualizza").val($num1Vis);
            } else if ($num1 != 0) {
                $num2Vis = $num2Vis + "00";
                $("#visualizza").val($num2Vis);
            }
        });
        $("#addizione").click(function () {
            $num1 = $num1 + 1
            $operazione = "sum";
            $("#visualizza").val("");

        });
        $("#sottrazione").click(function () {
            $num1 = $num1 + 1
            $operazione = "dif";
            $("#visualizza").val("");

        });

        $("#moltiplicazione").click(function () {
            $num1 = $num1 + 1
            $operazione = "mul";
            $("#visualizza").val("");

        });
        $("#divisione").click(function () {
            $num1 = $num1 + 1
            $operazione = "div";
            $("#visualizza").val("");

        });

        $("#risultato").click(function () {
            if ($num1 == 1) {
                console.log($num1Vis);
                console.log($num2Vis);
                var num1 = $num1Vis;
                var num2 = $num2Vis;
                $num2Vis = ""
                var operazione = $operazione
            } else if ($num1 > 1) {
                var num1 = $num2;
                var num2 = $num2Vis;
                console.log(num1);
                console.log(num2);
                var operazione = $operazione
                $num2Vis = ""
            }
            $.post("/calcolatrice/calcola",
                {
                    num1: num1,
                    num2: num2,
                    operazione: operazione

                }, function (data) {
                    console.log(data.result);
                    $("#visualizza").val("");
                    $("#visualizza").val(data.result);
                    $num2 = data.result
                });
        });
    })
    ();
</script>